{"version":3,"sources":["app/ares.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/rBA;AAAA","file":"public/aresDOM.min.js","sourcesContent":["/*!ares 0.1.0, Copyright 2019 Al Romano, released under MIT license */\r\n\r\n(function () {\r\n\t'use strict';\r\n\r\n\tvar readyfn = [],\r\n\t\tloadedfn = [],\r\n\t\tdomready = false,\r\n\t\tpageloaded = false,\r\n\t\tjsonpcount = 0,\r\n\t\td = document,\r\n\t\tw = window;\r\n\r\n\t// Fire any function calls on ready event\r\n\tfunction fireReady() {\r\n\t\tvar i;\r\n\t\tdomready = true;\r\n\t\tfor (i = 0; i < readyfn.length; i += 1) {\r\n\t\t\treadyfn[i]();\r\n\t\t}\r\n\t\treadyfn = [];\r\n\t}\r\n\r\n\t// Fire any function calls on loaded event\r\n\tfunction fireLoaded() {\r\n\t\tvar i;\r\n\t\tpageloaded = true;\r\n\t\t// For browsers with no DOM loaded support\r\n\t\tif (!domready) {\r\n\t\t\tfireReady();\r\n\t\t}\r\n\t\tfor (i = 0; i < loadedfn.length; i += 1) {\r\n\t\t\tloadedfn[i]();\r\n\t\t}\r\n\t\tloadedfn = [];\r\n\t}\r\n\r\n\t// Check DOM ready, page loaded\r\n\tif (d.addEventListener) {\r\n\t\t// Standards\r\n\t\td.addEventListener('DOMContentLoaded', fireReady, false);\r\n\t\tw.addEventListener('load', fireLoaded, false);\r\n\t} else if (d.attachEvent) {\r\n\t\t// IE\r\n\t\td.attachEvent('onreadystatechange', fireReady);\r\n\t\t// IE < 9\r\n\t\tw.attachEvent('onload', fireLoaded);\r\n\t} else {\r\n\t\t// Anything else\r\n\t\tw.onload = fireLoaded;\r\n\t}\r\n\r\n\t// Utility functions\r\n\r\n\t// Loop through node array\r\n\tfunction nodeLoop(fn, nodes) {\r\n\t\tvar i;\r\n\t\t// Good idea to walk up the DOM\r\n\t\tfor (i = nodes.length - 1; i >= 0; i -= 1) {\r\n\t\t\tfn(nodes[i]);\r\n\t\t}\r\n\t}\r\n\r\n\t// Convert to camel case\r\n\tfunction cssCamel(property) {\r\n\t\treturn property.replace(/-\\w/g, function (result) {return result.charAt(1).toUpperCase(); });\r\n\t}\r\n\r\n\t// Get computed style\r\n\tfunction computeStyle(elm, property) {\r\n\t\t// IE, everything else or null\r\n\t\treturn (elm.currentStyle) ? elm.currentStyle[cssCamel(property)] : (w.getComputedStyle) ? w.getComputedStyle(elm, null).getPropertyValue(property) : null;\r\n\r\n\t}\r\n\r\n\t// Returns URI encoded query string pair\r\n\tfunction queryPair(name, value) {\r\n\t\treturn encodeURIComponent(name).replace(/%20/g, '+') + '=' + encodeURIComponent(value).replace(/%20/g, '+');\r\n\t}\r\n\r\n\t// Set CSS, important to wrap in try to prevent error thrown on unsupported property\r\n\tfunction setCss(elm, property, value) {\r\n\t\ttry {\r\n\t\t\telm.style[cssCamel(property)] = value;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error('Could not set css style property \"' + property + '\".');\r\n\t\t}\r\n\t}\r\n\r\n\t// Show CSS\r\n\tfunction showCss(elm) {\r\n\t\telm.style.display = '';\r\n\t\t// For elements still hidden by style block\r\n\t\tif (computeStyle(elm, 'display') === 'none') {\r\n\t\t\telm.style.display = 'block';\r\n\t\t}\r\n\t}\r\n\r\n\t// Serialize form & JSON values\r\n\tfunction serializeData(nodes) {\r\n\t\tvar querystring = '', subelm, i, j;\r\n\t\tif (nodes.constructor === Object) { // Serialize JSON data\r\n\t\t\tfor (subelm in nodes) {\r\n\t\t\t\tif (nodes.hasOwnProperty(subelm)) {\r\n\t\t\t\t\tif (nodes[subelm].constructor === Array) {\r\n\t\t\t\t\t\tfor (i = 0; i < nodes[subelm].length; i += 1) {\r\n\t\t\t\t\t\t\tquerystring += '&' + queryPair(subelm, nodes[subelm][i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tquerystring += '&' + queryPair(subelm, nodes[subelm]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else { // Serialize node data\r\n\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\tif (elm.nodeName === 'FORM') {\r\n\t\t\t\t\tfor (i = 0; i < elm.elements.length; i += 1) {\r\n\t\t\t\t\t\tsubelm = elm.elements[i];\r\n\r\n\t\t\t\t\t\tif (!subelm.disabled) {\r\n\t\t\t\t\t\t\tswitch (subelm.type) {\r\n\t\t\t\t\t\t\t// Ignore buttons, unsupported XHR 1 form fields\r\n\t\t\t\t\t\t\tcase 'button':\r\n\t\t\t\t\t\t\tcase 'image':\r\n\t\t\t\t\t\t\tcase 'file':\r\n\t\t\t\t\t\t\tcase 'submit':\r\n\t\t\t\t\t\t\tcase 'reset':\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'select-one':\r\n\t\t\t\t\t\t\t\tif (subelm.length > 0) {\r\n\t\t\t\t\t\t\t\t\tquerystring += '&' + queryPair(subelm.name, subelm.value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'select-multiple':\r\n\t\t\t\t\t\t\t\tfor (j = 0; j < subelm.length; j += 1) {\r\n\t\t\t\t\t\t\t\t\tif (subelm[j].selected) {\r\n\t\t\t\t\t\t\t\t\t\tquerystring += '&' + queryPair(subelm.name, subelm[j].value);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'checkbox':\r\n\t\t\t\t\t\t\tcase 'radio':\r\n\t\t\t\t\t\t\t\tif (subelm.checked) {\r\n\t\t\t\t\t\t\t\t\tquerystring += '&' + queryPair(subelm.name, subelm.value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t// Everything else including shinny new HTML5 input types\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tquerystring += '&' + queryPair(subelm.name, subelm.value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, nodes);\r\n\t\t}\r\n\t\t// Tidy up first &\r\n\t\treturn (querystring.length > 0) ? querystring.substring(1) : '';\r\n\t}\r\n\r\n\t// Class helper\r\n\tfunction classHelper(classes, action, nodes) {\r\n\t\tvar classarray, search, replace, i, has = false;\r\n\t\tif (classes) {\r\n\t\t\t// Trim any whitespace\r\n\t\t\tclassarray = classes.split(/\\s+/);\r\n\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\tfor (i = 0; i < classarray.length; i += 1) {\r\n\t\t\t\t\tsearch = new RegExp('\\\\b' + classarray[i] + '\\\\b', 'g');\r\n\t\t\t\t\treplace = new RegExp(' *' + classarray[i] + '\\\\b', 'g');\r\n\t\t\t\t\tif (action === 'remove') {\r\n\t\t\t\t\t\telm.className = elm.className.replace(replace, '');\r\n\t\t\t\t\t} else if (action === 'toggle') {\r\n\t\t\t\t\t\telm.className = (elm.className.match(search)) ? elm.className.replace(replace, '') : elm.className + ' ' + classarray[i];\r\n\t\t\t\t\t} else if (action === 'has') {\r\n\t\t\t\t\t\tif (elm.className.match(search)) {\r\n\t\t\t\t\t\t\thas = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, nodes);\r\n\t\t}\r\n\t\treturn has;\r\n\t}\r\n\r\n\t// HTML insertion helper\r\n\tfunction insertHtml(value, position, nodes) {\r\n\t\tvar tmpnodes, tmpnode;\r\n\t\tif (value) {\r\n\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t// No insertAdjacentHTML support for FF < 8 and IE doesn't allow insertAdjacentHTML table manipulation, so use this instead\r\n\t\t\t\t// Convert string to node. We can't innerHTML on a document fragment\r\n\t\t\t\ttmpnodes = d.createElement('div');\r\n\t\t\t\ttmpnodes.innerHTML = value;\r\n\t\t\t\twhile ((tmpnode = tmpnodes.lastChild) !== null) {\r\n\t\t\t\t\t// Catch error in unlikely case elm has been removed\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (position === 'before') {\r\n\t\t\t\t\t\t\telm.parentNode.insertBefore(tmpnode, elm);\r\n\t\t\t\t\t\t} else if (position === 'after') {\r\n\t\t\t\t\t\t\telm.parentNode.insertBefore(tmpnode, elm.nextSibling);\r\n\t\t\t\t\t\t} else if (position === 'append') {\r\n\t\t\t\t\t\t\telm.appendChild(tmpnode);\r\n\t\t\t\t\t\t} else if (position === 'prepend') {\r\n\t\t\t\t\t\t\telm.insertBefore(tmpnode, elm.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {break; }\r\n\t\t\t\t}\r\n\t\t\t}, nodes);\r\n\t\t}\r\n\t}\r\n\r\n\t// Get nodes and return ares\r\n\tfunction ares(selector) {\r\n\t\tvar cb, nodes = [], json = false, nodelist, i;\r\n\r\n\t\tif (selector) {\r\n\r\n\t\t\t// Element node, would prefer to use (selector instanceof HTMLElement) but no IE support\r\n\t\t\tif (selector.nodeType && selector.nodeType === 1) {\r\n\t\t\t\tnodes = [selector]; // return element as node list\r\n\t\t\t} else if (typeof selector === 'object') {\r\n\t\t\t\t// JSON, document object or node list, would prefer to use (selector instanceof NodeList) but no IE support\r\n\t\t\t\tjson = (typeof selector.length !== 'number');\r\n\t\t\t\tnodes = selector;\r\n\t\t\t} else if (typeof selector === 'string') {\r\n\r\n\t\t\t\t// A very light querySelectorAll polyfill for IE < 8. It suits my needs but is restricted to IE CSS support, is no speed demon, and does leave older mobile browsers in the cold (that support neither querySelectorAll nor currentStyle/getComputedStyle). If you want to use a fuller featured selector engine like Qwery, Sizzle et al, just return results to the nodes array: nodes = altselectorengine(selector)\r\n\r\n\t\t\t\t// IE < 8\r\n\t\t\t\tif (!d.querySelectorAll) {\r\n\t\t\t\t\t// Polyfill querySelectorAll\r\n\t\t\t\t\td.querySelectorAll = function (selector) {\r\n\r\n\t\t\t\t\t\tvar style, head = d.getElementsByTagName('head')[0], allnodes, selectednodes = [], i;\r\n\r\n\t\t\t\t\t\tstyle = d.createElement('STYLE');\r\n\t\t\t\t\t\tstyle.type = 'text/css';\r\n\r\n\t\t\t\t\t\tif (style.styleSheet) {\r\n\t\t\t\t\t\t\tstyle.styleSheet.cssText = selector + ' {a:b}';\r\n\r\n\t\t\t\t\t\t\thead.appendChild(style);\r\n\r\n\t\t\t\t\t\t\tallnodes = d.getElementsByTagName('*');\r\n\r\n\t\t\t\t\t\t\tfor (i = 0; i < allnodes.length; i += 1) {\r\n\t\t\t\t\t\t\t\tif (computeStyle(allnodes[i], 'a') === 'b') {\r\n\t\t\t\t\t\t\t\t\tselectednodes.push(allnodes[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\thead.removeChild(style);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn selectednodes;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnodelist = d.querySelectorAll(selector);\r\n\r\n\t\t\t\t// Convert node list to array so results have full access to array methods\r\n\t\t\t\t// Array.prototype.slice.call not supported in IE < 9 and often slower than loop anyway\r\n\t\t\t\tfor (i = 0; i < nodelist.length; i += 1) {\r\n\t\t\t\t\tnodes[i] = nodelist[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Only attach nodes if not JSON\r\n\t\tcb = json ? {} : nodes;\r\n\r\n\t\t// Public functions\r\n\r\n\t\t// Fire on DOM ready\r\n\t\tcb.ready = function (fn) {\r\n\t\t\tif (fn) {\r\n\t\t\t\tif (domready) {\r\n\t\t\t\t\tfn();\r\n\t\t\t\t\treturn cb;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treadyfn.push(fn);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Fire on page loaded\r\n\t\tcb.loaded = function (fn) {\r\n\t\t\tif (fn) {\r\n\t\t\t\tif (pageloaded) {\r\n\t\t\t\t\tfn();\r\n\t\t\t\t\treturn cb;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tloadedfn.push(fn);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Executes a function on nodes\r\n\t\tcb.each = function (fn) {\r\n\t\t\tif (typeof fn === 'function') {\r\n\t\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t\t// <= IE 8 loses scope so need to apply\r\n\t\t\t\t\treturn fn.apply(elm, arguments);\r\n\t\t\t\t}, nodes);\r\n\t\t\t}\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Find first\r\n\t\tcb.first = function () {\r\n\t\t\treturn ares(nodes.shift());\r\n\t\t};\r\n\t\t// Find last\r\n\t\tcb.last = function () {\r\n\t\t\treturn ares(nodes.pop());\r\n\t\t};\r\n\t\t// Find odd\r\n\t\tcb.odd = function () {\r\n\t\t\tvar odds = [], i;\r\n\t\t\tfor (i = 0; i < nodes.length; i += 2) {\r\n\t\t\t\todds.push(nodes[i]);\r\n\t\t\t}\r\n\t\t\treturn ares(odds);\r\n\t\t};\r\n\t\t// Find even\r\n\t\tcb.even = function () {\r\n\t\t\tvar evens = [], i;\r\n\t\t\tfor (i = 1; i < nodes.length; i += 2) {\r\n\t\t\t\tevens.push(nodes[i]);\r\n\t\t\t}\r\n\t\t\treturn ares(evens);\r\n\t\t};\r\n\t\t// Hide node\r\n\t\tcb.hide = function () {\r\n\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\telm.style.display = 'none';\r\n\t\t\t}, nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Show node\r\n\t\tcb.show = function () {\r\n\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\tshowCss(elm);\r\n\t\t\t}, nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Toggle node display\r\n\t\tcb.toggle = function () {\r\n\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t// computeStyle instead of style.display == 'none' catches elements that are hidden via style block\r\n\t\t\t\tif (computeStyle(elm, 'display') === 'none') {\r\n\t\t\t\t\tshowCss(elm);\r\n\t\t\t\t} else {\r\n\t\t\t\t\telm.style.display = 'none';\r\n\t\t\t\t}\r\n\r\n\t\t\t}, nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Remove node\r\n\t\tcb.remove = function () {\r\n\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t// Catch error in unlikely case elm has been removed\r\n\t\t\t\ttry {\r\n\t\t\t\t\telm.parentNode.removeChild(elm);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}, nodes);\r\n\t\t\treturn ares();\r\n\t\t};\r\n\t\t// Get/Set CSS\r\n\t\tcb.css = function (property, value) {\r\n\t\t\tif (property) {\r\n\t\t\t\tif (value || value === '') {\r\n\t\t\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t\t\tsetCss(elm, property, value);\r\n\t\t\t\t\t}, nodes);\r\n\t\t\t\t\treturn cb;\r\n\t\t\t\t}\r\n\t\t\t\tif (nodes[0]) {\r\n\t\t\t\t\tif (nodes[0].style[cssCamel(property)]) {\r\n\t\t\t\t\t\treturn nodes[0].style[cssCamel(property)];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (computeStyle(nodes[0], property)) {\r\n\t\t\t\t\t\treturn computeStyle(nodes[0], property);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Get class(es)\r\n\t\tcb.getClass = function () {\r\n\t\t\tif (nodes[0] && nodes[0].className.length > 0) {\r\n\t\t\t\t// Weak IE trim support\r\n\t\t\t\treturn nodes[0].className.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '').replace(/\\s+/,' ');\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Set (replaces) classes\r\n\t\tcb.setClass = function (classes) {\r\n\t\t\tif (classes || classes === '') {\r\n\t\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t\telm.className = classes;\r\n\t\t\t\t}, nodes);\r\n\t\t\t}\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Add class\r\n\t\tcb.addClass = function (classes) {\r\n\t\t\tif (classes) {\r\n\t\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t\telm.className += ' ' + classes;\r\n\t\t\t\t}, nodes);\r\n\t\t\t}\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Remove class\r\n\t\tcb.removeClass = function (classes) {\r\n\t\t\tclassHelper(classes, 'remove', nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Toggle class\r\n\t\tcb.toggleClass = function (classes) {\r\n\t\t\tclassHelper(classes, 'toggle', nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Has class\r\n\t\tcb.hasClass = function (classes) {\r\n\t\t\treturn classHelper(classes, 'has', nodes);\r\n\t\t};\r\n\t\t// Get/set HTML\r\n\t\tcb.html = function (value) {\r\n\t\t\tif (value || value === '') {\r\n\t\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t\telm.innerHTML = value;\r\n\t\t\t\t}, nodes);\r\n\t\t\t\treturn cb;\r\n\t\t\t}\r\n\t\t\tif (nodes[0]) {\r\n\t\t\t\treturn nodes[0].innerHTML;\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Insert HTML before selector\r\n\t\tcb.htmlBefore = function (value) {\r\n\t\t\tinsertHtml(value, 'before', nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Insert HTML after selector\r\n\t\tcb.htmlAfter = function (value) {\r\n\t\t\tinsertHtml(value, 'after', nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Insert HTML after selector innerHTML\r\n\t\tcb.htmlAppend = function (value) {\r\n\t\t\tinsertHtml(value, 'append', nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Insert HTML before selector innerHTML\r\n\t\tcb.htmlPrepend = function (value) {\r\n\t\t\tinsertHtml(value, 'prepend', nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Get/Set HTML attributes\r\n\t\tcb.attr = function (property, value) {\r\n\t\t\tif (property) {\r\n\t\t\t\tproperty = property.toLowerCase();\r\n\t\t\t\t// IE < 9 doesn't allow style or class via get/setAttribute so switch. cssText returns prettier CSS anyway\r\n\t\t\t\tif (value || value === '') {\r\n\t\t\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t\t\tif (property === 'style') {\r\n\t\t\t\t\t\t\telm.style.cssText = value;\r\n\t\t\t\t\t\t} else if (property === 'class') {\r\n\t\t\t\t\t\t\telm.className = value;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telm.setAttribute(property, value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, nodes);\r\n\t\t\t\t\treturn cb;\r\n\t\t\t\t}\r\n\t\t\t\tif (nodes[0]) {\r\n\t\t\t\t\tif (property === 'style') {\r\n\t\t\t\t\t\tif (nodes[0].style.cssText) {\r\n\t\t\t\t\t\t\treturn nodes[0].style.cssText;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (property === 'class') {\r\n\t\t\t\t\t\tif (nodes[0].className) {\r\n\t\t\t\t\t\t\treturn nodes[0].className;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (nodes[0].getAttribute(property)) {\r\n\t\t\t\t\t\t\treturn nodes[0].getAttribute(property);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Get/Set HTML data property\r\n\t\tcb.data = function (key, value) {\r\n\t\t\tif (key) {\r\n\t\t\t\treturn cb.attr('data-'+key, value);\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Get/Set form element values\r\n\t\tcb.val = function (value) {\r\n\t\t\tvar values, i, j;\r\n\t\t\tif (value || value === '') {\r\n\t\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t\tswitch (elm.nodeName) {\r\n\t\t\t\t\tcase 'SELECT':\r\n\t\t\t\t\t\tif (typeof value === 'string' || typeof value === 'number') {\r\n\t\t\t\t\t\t\tvalue = [value];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (i = 0; i < elm.length; i += 1) {\r\n\t\t\t\t\t\t\t// Multiple select\r\n\t\t\t\t\t\t\tfor (j = 0; j < value.length; j += 1) {\r\n\t\t\t\t\t\t\t\telm[i].selected = '';\r\n\t\t\t\t\t\t\t\tif (elm[i].value === value[j]) {\r\n\t\t\t\t\t\t\t\t\telm[i].selected = 'selected';\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'INPUT':\r\n\t\t\t\t\tcase 'TEXTAREA':\r\n\t\t\t\t\tcase 'BUTTON':\r\n\t\t\t\t\t\telm.value = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, nodes);\r\n\r\n\t\t\t\treturn cb;\r\n\t\t\t}\r\n\t\t\tif (nodes[0]) {\r\n\t\t\t\tswitch (nodes[0].nodeName) {\r\n\t\t\t\tcase 'SELECT':\r\n\t\t\t\t\tvalues = [];\r\n\t\t\t\t\tfor (i = 0; i < nodes[0].length; i += 1) {\r\n\t\t\t\t\t\tif (nodes[0][i].selected) {\r\n\t\t\t\t\t\t\tvalues.push(nodes[0][i].value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn (values.length > 1) ? values : values[0];\r\n\t\t\t\tcase 'INPUT':\r\n\t\t\t\tcase 'TEXTAREA':\r\n\t\t\t\tcase 'BUTTON':\r\n\t\t\t\t\treturn nodes[0].value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Return matching checked checkbox or radios\r\n\t\tcb.checked = function (check) {\r\n\t\t\tif (typeof check === 'boolean') {\r\n\t\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\t\tif (elm.nodeName === 'INPUT' && (elm.type === 'checkbox' || elm.type === 'radio')) {\r\n\t\t\t\t\t\telm.checked = check;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, nodes);\r\n\t\t\t\treturn cb;\r\n\t\t\t}\r\n\t\t\tif (nodes[0] && nodes[0].nodeName === 'INPUT' && (nodes[0].type === 'checkbox' || nodes[0].type === 'radio')) {\r\n\t\t\t\treturn (!!nodes[0].checked);\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Add event handler\r\n\t\tcb.on = function (event, fn) {\r\n\t\t\tif (selector === w || selector === d) {\r\n\t\t\t\tnodes = [selector];\r\n\t\t\t}\r\n\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\tif (d.addEventListener) {\r\n\t\t\t\t\telm.addEventListener(event, fn, false);\r\n\t\t\t\t} else if (d.attachEvent) {\r\n\t\t\t\t\t// <= IE 8 loses scope so need to apply, we add this to object so we can detach later (can't detach anonymous functions)\r\n\t\t\t\t\telm[event + fn] =  function () { return fn.apply(elm, arguments); };\r\n\t\t\t\t\telm.attachEvent('on' + event, elm[event + fn]);\r\n\t\t\t\t}\r\n\t\t\t}, nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Remove event handler\r\n\t\tcb.off = function (event, fn) {\r\n\t\t\tif (selector === w || selector === d) {\r\n\t\t\t\tnodes = [selector];\r\n\t\t\t}\r\n\t\t\tnodeLoop(function (elm) {\r\n\t\t\t\tif (d.addEventListener) {\r\n\t\t\t\t\telm.removeEventListener(event, fn, false);\r\n\t\t\t\t} else if (d.attachEvent) {\r\n\t\t\t\t\telm.detachEvent('on' + event, elm[event + fn]);\r\n\t\t\t\t\t// Tidy up\r\n\t\t\t\t\telm[event + fn] = null;\r\n\t\t\t\t}\r\n\t\t\t}, nodes);\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Basic XHR 1, no file support. Shakes fist at IE\r\n\t\tcb.ajax = function (url, method, callback, nocache, nojsonp) {\r\n\t\t\tvar xhr,\r\n\t\t\t\tquery = serializeData(nodes),\r\n\t\t\t\ttype = (method) ? method.toUpperCase() : 'GET',\r\n\t\t\t\thostsearch = new RegExp('http[s]?://(.*?)/', 'gi'),\r\n\t\t\t\tdomain = hostsearch.exec(url),\r\n\t\t\t\ttimestamp = '_ts=' + (+new Date()),\r\n\t\t\t\thead = d.getElementsByTagName('head')[0],\r\n\t\t\t\tjsonpcallback = 'ares' + (+new Date()) + (jsonpcount += 1),\r\n\t\t\t\tscript;\r\n\r\n\t\t\tif (query && (type === 'GET' || type === 'DELETE')) {\r\n\t\t\t\turl += (url.indexOf('?') === -1) ? '?' + query : '&' + query;\r\n\t\t\t\tquery = null;\r\n\t\t\t}\r\n\r\n\t\t\t// JSONP if cross domain url\r\n\t\t\tif (type === 'GET' && !nojsonp && domain && w.location.host !== domain[1]) {\r\n\r\n\t\t\t\tif (nocache) {\r\n\t\t\t\t\turl += (url.indexOf('?') === -1) ? '?' + timestamp : '&' + timestamp;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Replace possible encoded ?\r\n\t\t\t\turl = url.replace('=%3F', '=?');\r\n\r\n\t\t\t\t// Replace jsonp ? with callback\r\n\t\t\t\tif (callback && url.indexOf('=?') !== -1) {\r\n\r\n\t\t\t\t\turl = url.replace('=?', '=' + jsonpcallback);\r\n\r\n\t\t\t\t\tw[jsonpcallback] = function (data) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tcallback(data, 200);\r\n\t\t\t\t\t\t} catch (e) {}\r\n\r\n\t\t\t\t\t\t// Tidy up\r\n\t\t\t\t\t\tw[jsonpcallback] = undefined;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// JSONP\r\n\t\t\t\tscript = document.createElement('script');\r\n\t\t\t\tscript.async = true;\r\n\t\t\t\tscript.src = url;\r\n\r\n\t\t\t\t// Tidy up\r\n\t\t\t\tscript.onload = function () {\r\n\t\t\t\t\thead.removeChild(script);\r\n\t\t\t\t};\r\n\r\n\t\t\t\thead.appendChild(script);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (w.XMLHttpRequest) {\r\n\t\t\t\t\txhr = new XMLHttpRequest();\r\n\t\t\t\t} else if (w.ActiveXObject) {\r\n\t\t\t\t\txhr = new ActiveXObject('Microsoft.XMLHTTP'); // IE < 9\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (xhr) {\r\n\r\n\t\t\t\t\tif (nocache) {\r\n\t\t\t\t\t\turl += (url.indexOf('?') === -1) ? '?' + timestamp : '&' + timestamp;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Douglas Crockford: \"Synchronous programming is disrespectful and should not be employed in applications which are used by people\"\r\n\t\t\t\t\txhr.open(type, url, true);\r\n\r\n\t\t\t\t\txhr.onreadystatechange = function () {\r\n\t\t\t\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\t\t\tcallback(xhr.responseText, xhr.status);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\txhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n\r\n\t\t\t\t\tif (type === 'POST' || type === 'PUT') {\r\n\t\t\t\t\t\txhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\txhr.send(query);\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn cb;\r\n\t\t};\r\n\t\t// Alias to cb.ajax(url, 'get', callback, nocache, nojsonp)\r\n\t\tcb.get = function (url, callback, nocache, nojsonp) {\r\n\t\t\treturn cb.ajax(url, 'get', callback, nocache, nojsonp);\r\n\t\t};\r\n\t\t// Alias to cb.ajax(url, 'post', callback, nocache)\r\n\t\tcb.post = function (url, callback, nocache) {\r\n\t\t\treturn cb.ajax(url, 'post', callback, nocache);\r\n\t\t};\r\n\r\n\t\treturn cb;\r\n\t}\r\n\r\n\t// Set ares's global namespace here ($)\r\n\tw.$ = ares;\r\n\r\n}());\r\n"]}